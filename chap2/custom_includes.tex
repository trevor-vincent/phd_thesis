\newcommand{\SurfELIntX}{\tvInt{\partial \Omega^{e}_l}{}{s}}
\newcommand{\Mmat}[2]{\mathbb{M}^e[#1,#2]}
\newcommand{\Dmat}[2]{\mathbb{D}^e_k[#1,#2]}
\newcommand{\Dmatx}[2]{\mathbb{D}^e_x[#1,#2]}
\newcommand{\Dmaty}[2]{\mathbb{D}^e_y[#1,#2]}
\newcommand{\Smat}[2]{\mathbb{S}^e_k[#1,#2]}
\newcommand{\Smatx}[2]{\mathbb{S}^e_x[#1,#2]}
\newcommand{\Smaty}[2]{\mathbb{S}^e_y[#1,#2]}
\newcommand{\Fmat}[2]{\mathbb{F}^e_l[#1,#2]}
\newcommand{\Ftmat}[2]{\widetilde{\mathbb{F}}^e_{kl}[#1,#2]}
\newcommand{\Ftmatx}[2]{\widetilde{\mathbb{F}}^e_{xl}[#1,#2]}
\newcommand{\Ftmaty}[2]{\widetilde{\mathbb{F}}^e_{yl}[#1,#2]}
\newcommand{\utrace}{ \widetilde{u} }
\newcommand{\qtrace}{ \widetilde{\tv q} }
\newcommand{\uhat}{\Hat u}
\newcommand{\fhat}{\Hat f}
\newcommand{\qhat}{\Hat {\tv q}}
\newcommand{\umodes}[1]{\uhat^e[{#1}]}
\newcommand{\qmodesx}[1]{\qhat^e_x[{#1}]}
\newcommand{\qmodesy}[1]{\qhat^e_y[{#1}]}
\newcommand{\fmodes}[1]{\fhat^e[{#1}]}
\newcommand{\qmodes}[1]{\qhat^e_k[{#1}]}
\newcommand{\utmodes}[1]{\widehat{\widetilde{u}}{}^l[{#1}]}
\newcommand{\qtmodes}[1]{\widehat{\widetilde{\tv q}}{}^l_k[{#1}]}
\newcommand{\qtmodesx}[1]{\widehat{\qtrace}^l_x[{#1}]}
\newcommand{\qtmodesy}[1]{\widehat{\qtrace}^l_y[{#1}]}
\newcommand{\tvhat}[1]{\tv{\Hat{#1}}} 
\newcommand{\tv}[1]{\boldsymbol{#1}}
\newcommand{\tvf}[1]{\uline{\textbf{#1}}}
\newcommand{\tvInt}[3]{\int_{#1}^{#2} \mathrm{d}#3 \,}
\newcommand{\VolIntX}{\tvInt{\Omega}{}{\tv x}}
\newcommand{\SurfIntX}{\tvInt{\partial \Omega}{}{s}}
\newcommand{\VolEIntX}{\tvInt{\Omega^{e}}{}{\tv x}}
\newcommand{\SurfEIntX}{\tvInt{\partial \Omega^{e}}{}{s}}
\newcommand{\tvPartial}[2]{ \frac{\partial#1}{\partial#2} }
\newcommand{\tvDeriv}[2]{ \frac{d#1}{d#2} }
\newcommand{\tvSDeriv}[2]{ \frac{d^2#1}{{d#2}^2} }
\newcommand{\mani}{\mathcal{M}}
\newcommand{\tess}{\mathcal{T}\left(\Omega \right)}
\newcommand{\fol}{\left \{ \Sigma_t \right \} }
\newcommand{\hyp}{ \Sigma_{t} }
\newcommand{\eqnref}[1]{ Equation (\ref{#1}) }
\newcommand{\barD}{ \bar{D} }
\newcommand{\barGam}{ \bar{\gamma} }
\newcommand{\barS}{ \bar{s} }
\newcommand{\barA}{ \bar{A} }
\newcommand{\barM}{ \bar{m} }
\newcommand{\barGAM}{ \bar{\Gamma} }
\newcommand{\barR}{ \bar{R} }
\newcommand{\barP}{ \bar{p} }
\newcommand{\barE}{ \bar{E} }
\newcommand{\barL}{ \bar{L} }
\newcommand{\barN}{ \bar{N} }
\newcommand{\barDelta}{ \bar{\Delta}}
\newcommand{\barATT}{ \bar{A}_{TT}}


% DOUBLE BRACES IN DISCONTINUOUS GALERKIN METHODS
% See http://tex.stackexchange.com/questions/252648/left-right-double-curly-brace-blackboard-bold-symbol
% Usage:
% \def\test#1{#1|xxx}
% $\dgal*{\test{}}$
% $\dgal*{\test{\big}}$
% $\dgal*{\test{\Big}}$
% $\dgal*{\test{\bigg}}$
% $\dgal*{\test{\Bigg}}$
% $\dgal{xxx}$
% $\dgal[\big]{xxx}$
% $\dgal[\Big]{xxx}$
% $\dgal[\bigg]{xxx}$
% $\dgal[\Bigg]{xxx}$

\usepackage{xparse}

\NewDocumentCommand{\dgal}{sO{}m}{%
  \IfBooleanTF{#1}
    {\dgalext{#3}}
    {\dgalx[#2]{#3}}%
}

\NewDocumentCommand{\dgalext}{m}{%
  \sbox0{%
    \mathsurround=0pt % just for safety
    $\left\{\vphantom{#1}\right.\kern-\nulldelimiterspace$%
  }%
  \sbox2{\{}%
  \ifdim\ht0=\ht2
    \{\kern-.45\wd2 \{#1\}\kern-.45\wd2 \}%
  \else
    \left\{\kern-.5\wd0\left\{#1\right\}\kern-.5\wd0\right\}%
  \fi
}

\NewDocumentCommand{\dgalx}{om}{%
  \sbox0{\mathsurround=0pt$#1\{$}%
  \sbox2{\{}%
  \ifdim\ht0=\ht2
    \{\kern-.45\wd2 \{#2\}\kern-.45\wd2 \}%
  \else
    \mathopen{#1\{\kern-.5\wd0 #1\{}
    #2
    \mathclose{#1\}\kern-.5\wd0 #1\}}
  \fi
}


\usepackage{booktabs}
\newcommand{\ra}[1]{\renewcommand{\arraystretch}{#1}}